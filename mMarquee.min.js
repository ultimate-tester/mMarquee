(function(a){a.fn.mMarquee=function(d){var h=a.extend({pixelsPerFrame:15,frameSpeed:400,freezeOnBlur:false,freezeOnClick:false,freezeOnHover:true},d);var e=true;var b=a(this);var g=b.wrapInner('<div class="mMarquee-Wrapper"></div>').children().first();g.prop("mMarqueeCloneCreated","false");var i=0;g.children().each(function(k,l){var j=a(l);i+=j.outerWidth(true)});g.width(i);g.outerHeight(g.height());b.css("position","relative");b.height(g.height());function f(k){var j=k.clone().appendTo(b);j.prop("mMarqueeCloneCreated","false");j.css("left",(j.width()+parseInt(j.css("left"))+1));c(j);return j}function c(l){if(typeof l=="undefined"){return}var k=l.children().outerWidth(true);var j=e?h.pixelsPerFrame:0;l.stop().animate({left:"-="+j},{easing:"linear",duration:h.frameDuration,complete:function(){var m=parseInt(l.css("left"));if(l.prop("mMarqueeCloneCreated")=="false"){if(m<=(-(l.outerWidth()-b.outerWidth()))){l.prop("mMarqueeCloneCreated","true");f(l)}}if(m<=(-l.outerWidth())){l.remove();l=undefined}c(l)}})}b.click(function(){if(h.freezeOnClick){e=!e}});b.mouseover(function(){if(h.freezeOnHover){e=false}});b.mouseout(function(){if(h.freezeOnHover){e=true}});a(window).blur(function(){if(h.freezeOnBlur){e=false}});a(window).focus(function(){if(h.freezeOnBlur){e=true}});c(g);return g}}(jQuery));